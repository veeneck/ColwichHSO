{{ partial "hero.html" . }}

{{ $pageParams := .Params }}

{{ range $key, $value := .Params.modules }}

	{{ range where $.Site.Pages ".Params.id" $value }}

		{{ $type := .Params.module_type }}

		{{ if (eq $type "achievements") }}

		<section id="section{{ $key }}" class="module {{ .Params.module_type }} altBG {{ if (eq $key 0) }}first{{ end }}">

		{{ else }}

		<section id="section{{ $key }}" class="module {{ .Params.module_type }} {{ if (eq $key 0) }}first{{ end }}">

		{{ end }}

			<div class="content">

				{{ if .Params.has_header }}
					<h2>{{ .Params.title }}</h2>
					<h3>{{ .Params.subtitle }}</h3>
				{{ end }}

				{{ if (eq $type "featured_image") }}
				    {{ partial "modules/featured_image.html" (dict "page" $pageParams ) }}
				{{ end }}

				{{ if eq $type "faq"}}
					{{ $faqs := where (where .Site.Pages "Type" "faq") ".Params.faq_category" $pageParams.faq_category }}
					{{ partial "modules/faq.html" (dict "faqs" $faqs) }}
				{{ end }}

				{{ if (eq $type "achievements") }}
				    {{ partial "modules/achievements.html" (dict "module" . ) }}
				{{ end }}

				{{ if (eq $type "donate") }}
				    {{ partial "modules/donate.html" (dict "module" . ) }}
				{{ end }}

				{{ if (eq $type "calendar") }}
				    {{ partial "modules/calendar.html" (dict "module" . ) }}
				{{ end }}

				{{ if (eq $type "calendar_full") }}
				    {{ partial "modules/calendar_full.html" (dict "module" . ) }}
				{{ end }}

				{{ if (eq $type "sponsors") }}
				    {{ partial "modules/sponsors.html" (dict "module" . ) }}
				{{ end }}

				{{ if (eq $type "footer") }}
				    {{ partial "modules/footer.html" (dict "module" . ) }}
				{{ end }}

			</div>

		</section>
		
	{{ end }}
{{ end }}